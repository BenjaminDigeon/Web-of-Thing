
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Blog du projet Web-of-Thing</title>
  <meta name="author" content="Benjamin Digeon">

  
  <meta name="description" content="Bibliothèque de contrôle de LED Strip Initialisation du SPI Pour initialiser la liasion SPI nous avons récuperé le code de l&#8217;exemple de &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://BenjaminDigeon.github.com/Web-of-Thing//">
  <link href="/Web-of-Thing/favicon.png" rel="icon">
  <link href="/Web-of-Thing/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/Web-of-Thing/javascripts/modernizr-2.0.js"></script>
  <script src="/Web-of-Thing/javascripts/ender.js"></script>
  <script src="/Web-of-Thing/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/Web-of-Thing/atom.xml" rel="alternate" title="Blog du projet Web-of-Thing" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-31671208-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/Web-of-Thing/">Blog du projet Web-of-Thing</a></h1>
  
    <h2>Benjamin Digeon et Florent David</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/Web-of-Thing/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:BenjaminDigeon.github.com/Web-of-Thing/" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/Web-of-Thing/">Blog</a></li>
  <li><a href="https://plus.google.com/photos/114338839247568164815/albums/5792525924639663633">Album Google +</a></li>
  <li><a href="https://vimeo.com/channels/398791">Channel Vimeo</a></li>
  <li><a href="https://github.com/BenjaminDigeon/Web-of-Thing">GitHub du projet</a></li>
  <li><a href="/Web-of-Thing/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/Web-of-Thing/blog/2012/12/23/led-strip-et-matrice-de-led/">Led Strip Et Matrice De Led</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-23T16:56:00+01:00" pubdate data-updated="true">Dec 23<span>rd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Bibliothèque de contrôle de LED Strip</h2>

<h2>Initialisation du SPI</h2>

<p>Pour initialiser la liasion SPI nous avons récuperé le code de l&#8217;exemple de LED_matrix dans les apps SMEWS qui permet d&#8217;initialiser la liasion SPI.</p>

<p>Et nous avons aussi défini les séquences de bit de contrôle pour chaque couleur primaire pour pouvoir les utilisés plus facilement plus tard.</p>

<p>NB : Nous nous sommes limité aux couleurs primaires à cause du manque d&#8217;alimentation, en effet le MBED (sans alimentation externe) ne permet que d&#8217;alimenter 30 LED RGB ce qui nous a limité dans le choix des couleurs.</p>

<figure class='code'><figcaption><span>lib_led_strip.h  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cp">#define SPI_PORT RFLPC_SPI0</span>
</span><span class='line'><span class="cp">#define NLED 30</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#define SPI_WRITE(val) rflpc_spi_write(SPI_PORT, (val))</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#define SPI_INIT do { \</span>
</span><span class='line'><span class="cp">   int spi_peripheral_clock = rflpc_clock_get_system_clock() / 8; \</span>
</span><span class='line'><span class="cp">   int needed_divider = spi_peripheral_clock / 125000; \</span>
</span><span class='line'><span class="cp">   int serial_clock_rate_divider = 1; \</span>
</span><span class='line'><span class="cp">   while (needed_divider / serial_clock_rate_divider &gt; 254) \</span>
</span><span class='line'><span class="cp">      serial_clock_rate_divider++; \</span>
</span><span class='line'><span class="cp">   needed_divider /= serial_clock_rate_divider; \</span>
</span><span class='line'><span class="cp">   rflpc_spi_init(SPI_PORT, RFLPC_SPI_MASTER, RFLPC_CCLK_8, 8, needed_divider, serial_clock_rate_divider); \</span>
</span><span class='line'><span class="cp">   }while(0);</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#define INIT_WAIT do { \</span>
</span><span class='line'><span class="cp">   rflpc_timer_enable(RFLPC_TIMER3); \</span>
</span><span class='line'><span class="cp">   rflpc_timer_set_clock(RFLPC_TIMER3,RFLPC_CCLK/8);\</span>
</span><span class='line'><span class="cp">   rflpc_timer_set_pre_scale_register(RFLPC_TIMER3, rflpc_clock_get_system_clock()/8000000); </span><span class="cm">/* microsecond timer */</span><span class="cp"> \</span>
</span><span class='line'><span class="cp">   rflpc_timer_start(RFLPC_TIMER3); \</span>
</span><span class='line'><span class="cp">  } while (0)</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#define BLEU  0b10110000</span>
</span><span class='line'><span class="cp">#define ROUGE  0b11001100    </span>
</span><span class='line'><span class="cp">#define VERT  0b11000011</span>
</span><span class='line'><span class="cp">#define CLEAR  0b11000000</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Exemple d&#8217;animation de la guirlande</h3>

<p>Un exemple simple de fonction qui allume chaque LED de la guirlande dans une couleur.</p>

<figure class='code'><figcaption><span>lib_led_strip.h  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="kt">void</span> <span class="n">unie</span> <span class="p">(</span><span class="kt">uint16_t</span> <span class="n">coul</span><span class="p">){</span>
</span><span class='line'>  <span class="kt">int</span> <span class="n">i</span> <span class="p">;</span>
</span><span class='line'>  <span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">NLED</span> <span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">SPI_WRITE</span><span class="p">(</span><span class="n">coul</span><span class="p">)</span> <span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Bibliothèque de contrôle de matrice de LED</h2>

<p>Le contrôle de la matrice de LED repose sur le même principe, on envois les 64 couleurs de LED qui compose la matrice.</p>

<p><img src="https://lh5.googleusercontent.com/-6K5iL3RGexg/UNcrJRfdeqI/AAAAAAAABXE/WPuPpZNzHCo/s900/DSC_0015.jpg"></p>

<h2>Intégration dans des applications SMEWS</h2>

<p>Pour l&#8217;intégration avec SMEWS nous avons réalisé 2 applications simple en HTML + Javascript, qui appelle des controleurs en GET qui execute une fonction avec une ou plusieurs couleurs choisies.</p>

<p>Nous avons bien conscience de l&#8217;aspect purement mono-utilisateur et bloquant de cette méthode mais nous n&#8217;avons pas eu le temps pour approfondir l&#8217;aspect multitâche des applications SMEWS.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/Web-of-Thing/blog/2012/12/05/commande-de-guirlande-de-led-avec-le-protocole-spi/">Commande De Guirlande De LED Avec Une Liaison SPI</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-05T14:17:00+01:00" pubdate data-updated="true">Dec 5<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Introduction à la liaison SPI</h2>

<p>Une liaison SPI (pour Serial Peripheral Interface) est un bus de données série synchrone.</p>

<p>Les circuits communiquent selon un schéma maître-esclaves, où le maître s&#8217;occupe totalement de la communication.</p>

<p>Plusieurs esclaves peuvent coexister sur un bus, la sélection du destinataire se fait par une ligne dédiée entre le maître et l&#8217;esclave appelée chip select.</p>

<p><img src="http://upload.wikimedia.org/wikipedia/commons/e/ed/SPI_single_slave.svg"></p>

<h2>Guirlande LED HL1606</h2>

<p>Pour tester le principe de liaison SPI, on a mis à notre disposition une guirlande de type <a href="http://www.adafruit.com/datasheets/HL1606E.pdf">HL1606</a>.</p>

<p><img src="https://lh3.googleusercontent.com/-zulgYjIKj7M/UL9I1V0OjCI/AAAAAAAABU4/5QMeuzS7dBU/s727/IMG_20121128_133930.jpg"></p>

<p><img src="https://lh3.googleusercontent.com/-W2dKbxZBeFA/UL9I1mL3PkI/AAAAAAAABU0/mKQCjOLcw60/s545/IMG_20121128_134901.jpg"></p>

<p>Comme il n&#8217;y avait qu&#8217;une seule guirlande pour tous les groupes, il a fallu la découper et jouer avec le fer à souder pour y intégrer des connecteurs.</p>

<p><img src="https://lh6.googleusercontent.com/-1WH01JaZGzk/UL9IyPs-TvI/AAAAAAAABUs/_GSJOv8wt4w/s545/IMG_20121128_160243.jpg"></p>

<h2>SPI avec RFLPC</h2>

<p>Pour piloter la guirlande depuis le MBED, il faut pouvoir envoyer des informations sur la liaison SPI.</p>

<p>La librairie RFLPC contient un <a href="http://hauspie.github.com/rflpc/doc/group__spi.html">module</a> pour s&#8217;interfacer avec la liaison SPI.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/Web-of-Thing/blog/2012/11/12/creation-dune-application-avec-smews/">Création D&#8217;une Application Avec SMEWS</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-11-12T09:07:00+01:00" pubdate data-updated="true">Nov 12<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Création d&#8217;une application avec SMEWS</h2>

<p>La création d&#8217;une application avec SMEWS se fait simplement en ajoutant un nouveau dossier dans /apps/.</p>

<p>Ce dossier contient les fichiers qui compose l&#8217;application, des pages HTML et des sources en C.</p>

<h2>Application statique</h2>

<p>Un exemple d&#8217;hello world avec SMEWS, une simple page HTML.</p>

<figure class='code'><figcaption><span>index.html  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="cp">&lt;!DOCTYPE html PUBLIC &quot;-//IETF//DTD HTML 2.0//EN&quot;&gt;</span>
</span><span class='line'><span class="nt">&lt;HTML&gt;</span>
</span><span class='line'>   <span class="nt">&lt;HEAD&gt;</span>
</span><span class='line'>      <span class="nt">&lt;TITLE&gt;</span>
</span><span class='line'>         Hello
</span><span class='line'>      <span class="nt">&lt;/TITLE&gt;</span>
</span><span class='line'>   <span class="nt">&lt;/HEAD&gt;</span>
</span><span class='line'><span class="nt">&lt;BODY&gt;</span>
</span><span class='line'>   <span class="nt">&lt;P&gt;</span>Hello World<span class="nt">&lt;/P&gt;</span>
</span><span class='line'><span class="nt">&lt;/BODY&gt;</span>
</span><span class='line'><span class="nt">&lt;/HTML&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Application dynamique avec paramètre</h2>

<p>Une petite application dynamique sous SMEWS, qui allume ou éteint une led interne en fonction d&#8217;un argument &#8220;on&#8221; passé en GET vers /do_led.</p>

<figure class='code'><figcaption><span>led_arg.c  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cm">/*</span>
</span><span class='line'><span class="cm">&lt;generator&gt;</span>
</span><span class='line'><span class="cm">    &lt;handlers doGet=&quot;do_led&quot;/&gt;</span>
</span><span class='line'><span class="cm">    &lt;args&gt;</span>
</span><span class='line'><span class="cm">     &lt;arg name=&quot;on&quot; type=&quot;uint8&quot; /&gt;</span>
</span><span class='line'><span class="cm">    &lt;/args&gt;</span>
</span><span class='line'><span class="cm">&lt;/generator&gt;</span>
</span><span class='line'><span class="cm">*/</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#include &lt;rflpc17xx/rflpc17xx.h&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="k">static</span> <span class="kt">char</span> <span class="nf">do_led</span><span class="p">(</span><span class="k">struct</span> <span class="n">args_t</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">rflpc_led_init</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">rep</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">args</span><span class="o">-&gt;</span><span class="n">on</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">rep</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">rflpc_led_set</span><span class="p">(</span><span class="n">RFLPC_LED_1</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">rflpc_led_clr</span><span class="p">(</span><span class="n">RFLPC_LED_1</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/* Adresse pour allumer : 192.168.1.2/led?on=1 */</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Implémentation de mbed_control_panel</h2>

<p>Le travail à réaliser est une interface de controle pour les LED internes du Mbed, qui conserve l&#8217;état de la LED.</p>

<figure class='code'><figcaption><span>led_arg.c  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cm">/*</span>
</span><span class='line'><span class="cm">&lt;generator&gt;</span>
</span><span class='line'><span class="cm"> &lt;handlers doGet=&quot;do_led&quot;/&gt;</span>
</span><span class='line'><span class="cm"> &lt;args&gt;</span>
</span><span class='line'><span class="cm">         &lt;arg name=&quot;ledIndex&quot; type=&quot;uint8&quot; /&gt;</span>
</span><span class='line'><span class="cm">         &lt;arg name=&quot;state&quot; type=&quot;uint8&quot; /&gt;</span>
</span><span class='line'><span class="cm">     &lt;/args&gt;</span>
</span><span class='line'><span class="cm">&lt;/generator&gt;</span>
</span><span class='line'><span class="cm">*/</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#include &lt;rflpc17xx/rflpc17xx.h&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="k">static</span> <span class="kt">char</span> <span class="nf">do_led</span><span class="p">(</span><span class="k">struct</span> <span class="n">args_t</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">ledIndex</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">args</span><span class="o">-&gt;</span><span class="n">ledIndex</span><span class="p">;</span>
</span><span class='line'>      <span class="kt">int</span> <span class="n">state</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">args</span><span class="o">-&gt;</span><span class="n">state</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">rflpc_led_init</span><span class="p">();</span>
</span><span class='line'>  
</span><span class='line'>      <span class="k">switch</span><span class="p">(</span><span class="n">ledIndex</span><span class="p">){</span>
</span><span class='line'>  
</span><span class='line'>          <span class="k">case</span> <span class="mi">1</span>:
</span><span class='line'>          <span class="n">ledIndex</span> <span class="o">=</span> <span class="n">RFLPC_LED_1</span><span class="p">;</span>
</span><span class='line'>          <span class="k">break</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>          <span class="k">case</span> <span class="mi">2</span>:
</span><span class='line'>          <span class="n">ledIndex</span> <span class="o">=</span> <span class="n">RFLPC_LED_2</span><span class="p">;</span>
</span><span class='line'>          <span class="k">break</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>          <span class="k">case</span> <span class="mi">3</span>:
</span><span class='line'>          <span class="n">ledIndex</span> <span class="o">=</span> <span class="n">RFLPC_LED_3</span><span class="p">;</span>
</span><span class='line'>          <span class="k">break</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>          <span class="k">case</span> <span class="mi">4</span>:
</span><span class='line'>          <span class="n">ledIndex</span> <span class="o">=</span> <span class="n">RFLPC_LED_4</span><span class="p">;</span>
</span><span class='line'>          <span class="k">break</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>          <span class="nl">default:</span>
</span><span class='line'>          <span class="k">break</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">state</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">rflpc_led_set</span><span class="p">(</span><span class="n">ledIndex</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">rflpc_led_clr</span><span class="p">(</span><span class="n">ledIndex</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Pour gérer l&#8217;affichage de l&#8217;état dans la page HTML, il suffi d&#8217;ajouter un peu de Javascript.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/Web-of-Thing/blog/2012/11/06/decouverte-de-smews/">Découverte De Smews</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-11-06T13:12:00+01:00" pubdate data-updated="true">Nov 6<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Smews</h2>

<p>Smart &amp; Mobile Embedded Web Server</p>

<p>Smews est une librairie permettant de mettre en place le principe de l&#8217;Internet des objet.</p>

<p>Grace à Smews, des micro-processeurs tel que l&#8217;arduino ou le mbed peuvent héberger un serveur HTTP permettant de rendre un object connecté.</p>

<p>Nous allons pouvoir utiliser ce serveur pour contrôler notre micro-processeur à distance.</p>

<h2>Instalation</h2>

<p>Pour fonctionner SMEWS nécessite plusieurs choses :</p>

<ul>
<li>Un environnement de compilation en C pour la cible choisie, ici arm-none-eabi-gcc.</li>
<li>Python en version 2.5 ou supérieure.</li>
<li>Scons en version 0.96.</li>
</ul>


<p>Pour ma part il m’a juste fallu installer Scons.</p>

<p>Puis lancer le script qui se trouve dans targets/mbed_ethernet pour télécharger et compiler la bibliothèque rflpc.</p>

<h2>Utilisation</h2>

<p>Pour créer un binaire contenant le serveur web et l’application il suffit de lancer la commande scons suivante :</p>

<pre><code>scons target=mbed_ethernet apps=mon_app
</code></pre>

<p>Avec mon_app le nom du dossier contenant l’application dans apps.</p>

<p>Ici pour compiler l’exemple Welcome il a suffit de lancer :</p>

<pre><code>scons target=mbed_ethernet apps=welcome ipaddr=192.168.1.2
</code></pre>

<p>Avec ipaddr l&#8217;adresse ip de notre serveur HTTP.</p>

<h2>Test du binaire</h2>

<p>On transfere le binaire dans le mbed puis on relie le mbed à l’ordinateur en configurant la plage d’adresse ip pour pouvoir accéder à l’adresse 192.168.1.2.</p>

<p>On lance le navigateur à l’adresse 192.168.1.2</p>

<p>Et cela nous affiche correctement la page welcome de Smews.</p>

<h2>Conclusion</h2>

<p>Lors de cette séance nous avons découvert Smews qui permet d&#8217;intégré un serveur web dans notre microcontroleur mbed, et nous avons réussi à générer l&#8217;affichage d&#8217;une page de test.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/Web-of-Thing/blog/2012/10/21/mapping-des-broches-du-mbed-et-module-ethernet/">Mapping Des Broches Du MBED Et Module Ethernet</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-10-21T20:53:00+02:00" pubdate data-updated="true">Oct 21<span>st</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Faire clignoter une LED externe</h2>

<p>Pour allumer une LED externe avec la librairie rflpc, nous avons dû comprendre le système d&#8217;indexage qui nous permet de contrôler les pattes du mbed.</p>

<p>Grâce aux documents, nous avons découvert un shéma présentant le mbed, ou chaque pattes est symbolisé avec son indexage sur la carte et un code associé avec un format bien particulier.</p>

<pre><code>P(numéros de port de 0 à 4 ).(numéros de pin de 0 à 31). 
</code></pre>

<p>Par exemple dans notre test P1.31 correspond a la patte N°20 du mbed.</p>

<p><img src="https://lh4.googleusercontent.com/-w-cqQqED3T8/UJTY0vXojwI/AAAAAAAAA9o/H-l_64omReI/s553/IMG_20121017_135317.jpg" width="250" height="350"></p>

<p>Le code source de l&#8217;exemple :</p>

<figure class='code'><figcaption><span>led_externe.c  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cp">#include &lt;rflpc17xx/rflpc17xx.h&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">rflpc_gpio_set_pin_mode_output</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">31</span><span class="p">);</span>
</span><span class='line'>  
</span><span class='line'>  <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">rflpc_gpio_set_pin</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">31</span><span class="p">);</span>
</span><span class='line'>      <span class="n">RFLPC_DELAY</span><span class="p">(</span><span class="mi">1000000</span><span class="p">);</span>
</span><span class='line'>      <span class="n">rflpc_gpio_clr_pin</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">31</span><span class="p">);</span>
</span><span class='line'>      <span class="n">RFLPC_DELAY</span><span class="p">(</span><span class="mi">1000000</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Module ethernet</h2>

<p>Pour connecter le  module Ethernet nous ne nous sommes pas heurté à de problème particulier.</p>

<p>Et nous avons vite testé le code suivant permettant d&#8217;allumé ou d&#8217;éteindre une LED en fonction de l&#8217;établissement d&#8217;une connexion via le cable éthernet.</p>

<p>Le code source de l&#8217;exemple (avec LED interne + LED externe) :</p>

<figure class='code'><figcaption><span>ethernet.c  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cp">#include &lt;rflpc17xx/rflpc17xx.h&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">rflpc_led_init</span><span class="p">();</span>
</span><span class='line'>  <span class="n">rflpc_eth_init</span><span class="p">();</span>
</span><span class='line'>  <span class="n">rflpc_gpio_set_pin_mode_output</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">);</span>
</span><span class='line'>      
</span><span class='line'>  <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">rflpc_eth_link_state</span><span class="p">())</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">rflpc_led_set</span><span class="p">(</span><span class="n">RFLPC_LED_1</span><span class="p">);</span>
</span><span class='line'>          <span class="n">rflpc_gpio_set_pin</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">rflpc_led_clr</span><span class="p">(</span><span class="n">RFLPC_LED_1</span><span class="p">);</span>
</span><span class='line'>          <span class="n">rflpc_gpio_clr_pin</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="n">RFLPC_DELAY</span><span class="p">(</span><span class="mi">1000000</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Vidéos</h3>

<p>Led interne :</p>

<iframe src="http://player.vimeo.com/video/52735626?badge=0" width="500" height="750" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>


<p>Led externe :</p>

<iframe src="http://player.vimeo.com/video/52735692?badge=0" width="500" height="750" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/Web-of-Thing/blog/2012/10/10/chaine-de-compilation/">Chaîne De Compilation</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-10-10T15:28:00+02:00" pubdate data-updated="true">Oct 10<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Afin de mettre en place notre chaine de compilation pour processeur ARM (cortex-M3), nous avons cherché les différentes méthodes possibles.</p>

<p>Plusieurs chaînes de compilation sont listés sur le <a href="https://mbed.org/handbook/Exporting-to-offline-toolchains">wiki du site mbed.org</a>.</p>

<p>Mais ces méthodes ne se font que via l&#8217;utilisation de la librairie MBED, qui offre une abstraction trop élevé pour notre projet.</p>

<p>Sous les conseils de notre enseignant de TD, nous avons opté pour la solution regroupant le compilateur arm-none-eabi-gcc et la la librairie RFLPC.</p>

<h2>Installation de arm-none-eabi-gcc sous MacOSx</h2>

<p>L&#8217;installation se fait rapidement et simplement avec MacPort en lançant la commande suivante :</p>

<pre><code>sudo port install arm-none-eabi-gcc
</code></pre>

<h2>Installation de arm-none-eabi-gcc sous Linux</h2>

<p>Nous avons tout d&#8217;abord essayé de l&#8217;installer via les sources fourni dans <a href="http://www.lifl.fr/~marquet/cnl/pje-wot/wot5-summon-tool-chain+rflpc.tgz">l&#8217;archive</a> mis à disposition par Mr Marquet.</p>

<p>Mais à cause d&#8217;une erreur lors de l&#8217;installation nous n&#8217;avons pas réussi à aller jusqu&#8217;au bout, nous avons donc télécharger directement <a href="http://goo.gl/J4uuF">le binaire du compilateur</a>.</p>

<p>On ajoute la ligne suivante dans le fichier .bashrc dans le but de pouvoir acceder facilement au compilateur.</p>

<pre><code> PATH=/home/m1/davidf/Bureau/pje/arm-none-eabi-gcc-4_6/bin:$PATH
</code></pre>

<h2>Configuration de la librairie RFLPC</h2>

<p>Nous avons donc récupéré à partir de l&#8217;archive la librairie <a href="http://hauspie.github.com/rflpc/">RFLPC</a>.</p>

<p>Tout d&#8217;abord comme expliqué dans <a href="http://hauspie.github.com/rflpc/doc/index.html">la documentation</a> on paramètre le fichier Makefile.vars.</p>

<p>Puis à la racine du dossier contenant la librairie RFLPC on execute la commande</p>

<pre><code>make
</code></pre>

<p> qui configure la librairie avec notre compilateur et fabrique les fichiers .bin associés aux exemples.</p>

<h2>Premiers tests</h2>

<p>Pour tester notre chaîne de compilation, nous avons créé un nouveau dossier contenant un makefile généré par la librairie RFLPC.</p>

<figure class='code'><figcaption><span>Makefile </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>OUTPUT_NAME=test
</span><span class='line'>SRC=$(wildcard *.c)
</span><span class='line'>OBJS=$(SRC:.c=.o)
</span><span class='line'>
</span><span class='line'>RFLPC_DIR=/Users/ben/rflpc
</span><span class='line'>include $(RFLPC_DIR)/Makefile.in</span></code></pre></td></tr></table></div></figure>


<p>Puis on écrit un code de test en s&#8217;aidant de <a href="http://hauspie.github.com/rflpc/doc/index.html">la documentation</a> de la librairie pour faire clignoter une LED interne.</p>

<figure class='code'><figcaption><span>led.c  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cp">#include &lt;rflpc17xx/rflpc17xx.h&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="n">rflpc_led_init</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">rflpc_led_set</span><span class="p">(</span><span class="n">RFLPC_LED_1</span><span class="p">);</span>
</span><span class='line'>      <span class="n">RFLPC_DELAY</span><span class="p">(</span><span class="mi">1000000</span><span class="p">);</span>
</span><span class='line'>      <span class="n">rflpc_led_clr</span><span class="p">(</span><span class="n">RFLPC_LED_1</span><span class="p">);</span>
</span><span class='line'>      <span class="n">RFLPC_DELAY</span><span class="p">(</span><span class="mi">1000000</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Puis il suffit de génèrer le .bin avec la commande</p>

<pre><code>make
</code></pre>

<p>On télécharge le binaire sur le micro-processeur et la LED clignote comme prévu.</p>

<p>Pour faire clignoter une LED externe, nous avons chercher les informations concernant le mapping entre les pattes du micro-processeur et les sorties de la carte dans les datasheets fourni avec la librairie.</p>

<p>Il ne nous reste plus qu&#8217;a faire quelques tests avec une LED externe lors de la prochaine séance.</p>

<h2>Conclusion</h2>

<p>Cette phase de recherche et de configuration d&#8217;une chaîne de compilation nous a pris beaucoup plus de temps que nous l&#8217;avions prévu.
Mais cela nous a permis de mieux comprendre la phase de génération d&#8217;un binaire pour micro-processeur et le mapping entre les pattes du micro-processeur et les entrée/sorties de la carte.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/Web-of-Thing/blog/2012/09/26/decouverte-du-microprocesseur-et-premiers-montages/">Découverte Du Microprocesseur Et Premiers Montages</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-09-26T17:21:00+02:00" pubdate data-updated="true">Sep 26<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Découverte du microprocesseur</h2>

<p>La première étape du projet à était de découvrir le microprocesseur avec lequel nous allons travailler.</p>

<p>Le microprocesseur à nôtre disposition est le <a href="http://mbed.org/">mbed</a>, un microprocesseur pour le prototypage rapide.</p>

<p><img src="https://lh5.googleusercontent.com/-NBz7WuQRsjE/UGMvpI0HWpI/AAAAAAAAA8E/6G3YABsYtaA/s545/IMG_20120926_142127.jpg" width="250" height="350"></p>

<p>Il contient un processeur <a href="http://www.arm.com/products/processors/cortex-m/cortex-m3.php">ARM Cortex-M3</a> cadencé à 96 MHz avec 512KB de FLASH pour le stockage et 32KB de RAM.</p>

<p>On peut également lui ajouté des périphériques, par exemple :</p>

<ul>
<li>Un port ethernet pour la mise en réseau.</li>
<li>Un port USB host pour le brancher à un stockage USB.</li>
</ul>


<p>Il contient plusieurs ports d&#8217;entrée/sortie analogique et numérique.</p>

<p><img src="https://lh4.googleusercontent.com/-ulgbMkBnBsM/UGMvpO04kiI/AAAAAAAAA8A/qS-uLDRuDI4/s545/IMG_20120926_141849.jpg" width="250" height="350"></p>

<h2>Premiers montages</h2>

<h3>Led intégré</h3>

<p>Pour commencer et découvrir l&#8217;IDE en ligne nous avons créer un premier programme qui fait clignoter la led déjà présente sur le circuit intégré.</p>

<figure class='code'><figcaption><span>led.cpp ++ </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cp">#include &quot;mbed.h&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">DigitalOut</span> <span class="n">myled</span><span class="p">(</span><span class="n">LED1</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">myled</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>      <span class="n">wait</span><span class="p">(</span><span class="mf">0.2</span><span class="p">);</span>
</span><span class='line'>      <span class="n">myled</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="n">wait</span><span class="p">(</span><span class="mf">0.2</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Led externe</h3>

<p>Puis nous avons fait la même chose avec une led branché sur une des broches de sortie.</p>

<p>Pour cela il a fallu lui adjoindre une résistance, et donc calculer la valeur de la résistance à partir des traits de couleur inscrit dessus.</p>

<p><img src="https://lh5.googleusercontent.com/-nvcsVIQp4aU/UGMvtD5XhnI/AAAAAAAAA8Y/7h03UELHmpk/s545/IMG_20120926_143246.jpg" width="250" height="350"></p>

<p>Et enfin il à suffi de modifier l&#8217;adresse du port de sortie de la Led dans notre côte, ici P5 à la place de LED1.</p>

<p><img src="https://lh3.googleusercontent.com/-ttLDg7gJULQ/UGMvuxOy7jI/AAAAAAAAA8k/0DtkzPydi_k/s545/IMG_20120926_143926.jpg"></p>

<iframe src="http://player.vimeo.com/video/50227349" width="500" height="333" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>


<h3>Feu tricolor</h3>

<p>Puis nous avons réaliser un montage un peu plus complexe, un feu tricolor. Il a donc fallut alterner l&#8217;alimentation de 3 broches relié a 3 LED pour créer le cycle d&#8217;un feu tricolor.</p>

<iframe src="http://player.vimeo.com/video/50227348" width="500" height="333" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>




<figure class='code'><figcaption><span>feu.cpp ++ </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cp">#include &quot;mbed.h&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">DigitalOut</span> <span class="n">rouge</span><span class="p">(</span><span class="n">p5</span><span class="p">);</span>
</span><span class='line'><span class="n">DigitalOut</span> <span class="n">jaune</span><span class="p">(</span><span class="n">p6</span><span class="p">);</span>
</span><span class='line'><span class="n">DigitalOut</span> <span class="n">vert</span><span class="p">(</span><span class="n">p7</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">vert</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="n">jaune</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="n">rouge</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>      <span class="n">wait</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</span><span class='line'>      <span class="n">rouge</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="n">jaune</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>      <span class="n">wait</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</span><span class='line'>      <span class="n">jaune</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="n">vert</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>      <span class="n">wait</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Une horloge binaire</h2>

<p>Ayant fini tout les objectifs de la scéance en très peu de temps et étant tout les deux des habitués de l&#8217;éléctronique et des microcontrôleurs.</p>

<p>Nous avons désider de réaliser un montage un peu plus complexe, une horloge binaire.</p>

<iframe src="http://player.vimeo.com/video/50227347" width="500" height="333" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>


<p>Vous pouvez retrouver le code source du programme de l&#8217;horloge dans <a href="https://github.com/BenjaminDigeon/Web-of-Thing/">le repository GitHub du projet</a>, ce code est inspiré de celui de <a href="http://www.lagrottedubarbu.com/2009/12/30/lagrottedubarbu-saison-02-episode-06-horlogeultrabinaire/">la grotte du barbu</a> écrit initialement pour la plateforme Arduino.</p>

<h2>Conclusion</h2>

<p>Cette séance c&#8217;est très bien passé même et à était très intéressante surtout en découvrant un microprocesseur que l&#8217;on ne connaissait pas (autre des Arduino ou raspberry pi) et avec la mise en place de l&#8217;horloge binaire.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/Web-of-Thing/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/Web-of-Thing/blog/2012/12/23/led-strip-et-matrice-de-led/">Led Strip et Matrice de Led</a>
      </li>
    
      <li class="post">
        <a href="/Web-of-Thing/blog/2012/12/05/commande-de-guirlande-de-led-avec-le-protocole-spi/">Commande de guirlande de LED avec une liaison SPI</a>
      </li>
    
      <li class="post">
        <a href="/Web-of-Thing/blog/2012/11/12/creation-dune-application-avec-smews/">Création d&#8217;une application avec SMEWS</a>
      </li>
    
      <li class="post">
        <a href="/Web-of-Thing/blog/2012/11/06/decouverte-de-smews/">Découverte de smews</a>
      </li>
    
      <li class="post">
        <a href="/Web-of-Thing/blog/2012/10/21/mapping-des-broches-du-mbed-et-module-ethernet/">Mapping des broches du MBED et module ethernet</a>
      </li>
    
  </ul>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Benjamin Digeon -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
